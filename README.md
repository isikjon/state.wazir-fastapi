# state.wazir-fastapi

## Описание проекта

Сервис для размещения объявлений о недвижимости с возможностью просмотра 360° туров помещений, чатом между пользователями и другими функциями для поиска и управления недвижимостью.

## Развертывание с помощью Docker

### Предварительные требования

- Docker и Docker Compose установлены на сервере
- Git для клонирования репозитория

### Шаги по развертыванию

1. Клонируйте репозиторий:

```bash
git clone <url-репозитория>
cd state.wazir-fastapi
```

2. Настройте переменные окружения (при необходимости):

Уже есть файл `.env` с базовыми настройками. Если нужно изменить какие-то параметры (например, для почты), отредактируйте этот файл.

3. Запустите контейнеры Docker:

```bash
docker-compose up -d
```

Эта команда запустит:
- Веб-приложение на FastAPI
- Базу данных MySQL

4. Проверьте, что все контейнеры запущены:

```bash
docker-compose ps
```

5. Доступ к приложению:

- Web интерфейс: http://localhost:8000
- API: http://localhost:8000/api/v1
- Документация API: http://localhost:8000/docs

### Управление контейнерами

- Остановка контейнеров: `docker-compose stop`
- Запуск после остановки: `docker-compose start`
- Остановка и удаление контейнеров: `docker-compose down`
- Просмотр логов: `docker-compose logs -f`

### Резервное копирование данных

Данные базы данных хранятся в Docker volume. Для создания резервной копии:

```bash
# Создание дампа базы данных
docker-compose exec db mysqldump -u root -prootpassword wazir_db > backup.sql

# Восстановление из дампа
docker-compose exec -T db mysql -u root -prootpassword wazir_db < backup.sql
```

### Обновление приложения

1. Получите последние изменения из репозитория:

```bash
git pull
```

2. Пересоберите и перезапустите контейнеры:

```bash
docker-compose down
docker-compose up -d --build
```

## Структура проекта

- `/api` - API эндпоинты
- `/app` - Основная логика приложения
- `/templates` - HTML шаблоны
- `/static` - Статические файлы (CSS, JS, изображения)
- `/media` - Загружаемые пользователями файлы
- `/logs` - Логи приложения

## Основные функции

- Регистрация и авторизация пользователей
- Создание и управление объявлениями о недвижимости
- Загрузка фотографий и добавление 360° туров
- Чат между пользователями через WebSocket
- Поиск и фильтрация объявлений
- Админ-панель для модерации объявлений
