#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –¥–µ–ø–ª–æ—è —Å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–º–∏ –ª–æ–≥–∞–º–∏

echo "üêõ –î–µ–ø–ª–æ–π —Å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–º–∏ –ª–æ–≥–∞–º–∏..."

# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å—Ç–∞—Ä—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose down 2>/dev/null

# –ó–∞–ø—É—Å–∫–∞–µ–º —Å development –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
echo "üîÑ –ó–∞–ø—É—Å–∫–∞–µ–º —Å –æ—Ç–ª–∞–¥–∫–æ–π..."
docker-compose -f docker-compose.dev.yml up -d

echo "‚úÖ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω!"
echo "üåê –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: http://localhost:8000"
echo "üìã –ê–¥–º–∏–Ω–∫–∞: http://localhost:8000/admin/requests"
echo ""
echo "üìä –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ª–æ–≥–∏ (–Ω–∞–∂–º–∏—Ç–µ Ctrl+C –¥–ª—è –≤—ã—Ö–æ–¥–∞):"
echo "–ò—â–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏ —Å DEBUG –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏"
echo "=" * 60

# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
docker-compose -f docker-compose.dev.yml logs -f --tail=50 | grep -E "(DEBUG|ERROR|image|photo)" 